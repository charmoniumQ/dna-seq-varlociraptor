{
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "vconcat": [
        {
          "transform": [{"calculate": "datum.info", "as": "vega_debugging_datum"}],
          "mark": "bar",
          "encoding": {
            "column": {"field": "quality", "type": "ordinal", "title": null},
            "x": {"field": "group", "type": "nominal", "title": null},
            "y": {"field": "times", "type": "quantitative", "title": "Counts"},
            "color": {
              "field": "effect",
              "type": "nominal",
              "title": "Evidence",
              "sort": ["None", "Barely", "Positive", "Strong", "Very Strong"],
              "scale": {
                "domain": ["None", "Barely", "Positive", "Strong", "Very Strong"],
                "range": ["#999999", "#2ba6cb", "#afdfee", "#ffa3a3", "#ff5555"]
              }
            },
            "tooltip": [
              {"field": "strand", "type": "nominal", "title": "Strand"},
              {"field": "orientation", "type": "nominal", "title": "Orientation"},
              {"field": "times", "type": "quantitative", "title": "Counts"},
              {"field": "alignment", "type": "nominal", "title": "Alignment"},
              {"field": "locus", "type": "nominal", "title": "Locus"},
              {
                "field": "indel operations",
                "type": "nominal",
                "title": "Indel operations"
              },
              {"field": "softclip", "type": "nominal", "title": "Softclip"},
              {"field": "position", "type": "nominal", "title": "Read position"}
            ]
          }
        },
        {
          "transform": [{"flatten": ["info"]}],
          "mark": {"type": "line", "point": {"size": 100}},
          "encoding": {
            "column": {"field": "quality", "type": "ordinal", "title": null, header: null},
            "x": {"field": "group", "type": "nominal", "title": null},
            "y": {"field": "info", "type": "nominal", "title": null},
            "detail": {"field": "group", "type": "nominal"},
            "color": {"value": "black"}
          }
        }
    ],
    "config": {
        "axisX": {
            "labels": false,
            "ticks": false
        },
        "concat": {
            "spacing": 0
        }
    }
}